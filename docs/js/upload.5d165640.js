/*!
 * kui-vue v3.3.3
 * Copyright 2017-present, kui-vue.
 * All rights reserved.
 * Author: chuchur@qq.com / www.chuchur.com
 */
"use strict";(self["webpackChunkkui_vue"]=self["webpackChunkkui_vue"]||[]).push([[3650],{2462:function(e,t,n){n.r(t),n.d(t,{default:function(){return Le}});var a,l,o=function(){var e=this;e._self._c;return e._m(0)},i=[function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("Upload 上传")]),t("p",[e._v("上传是将信息（网页、文字、图片、视频等）通过网页或者上传工具发布到远程服务器上的过程。")]),t("h2",{attrs:{id:"何时使用",tabindex:"-1"}},[e._v("何时使用 "),t("a",{staticClass:"anchor",attrs:{href:"#何时使用"}},[e._v("#")])]),t("ul",[t("li",[e._v("当需要上传一个或一些文件时。")]),t("li",[e._v("当需要展现上传的进度时。")]),t("li",[e._v("当需要使用拖拽交互时。")])]),t("h2",{attrs:{id:"代码演示",tabindex:"-1"}},[e._v("代码演示 "),t("a",{staticClass:"anchor",attrs:{href:"#代码演示"}},[e._v("#")])])])}],s=n(1001),d={},r=(0,s.Z)(d,o,i,!1,null,null,null),u=r.exports,c=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers},on:{change:e.handleChange}},[t("Button",{attrs:{icon:e.CloudUpload}},[e._v("Click to upload")])],1)],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"点击上传",tabindex:"-1"}},[e._v("点击上传 "),t("a",{staticClass:"anchor",attrs:{href:"#点击上传"}},[e._v("#")])]),t("p",[e._v("经典款式，用户点击按钮弹出文件选择框。")])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    :headers="headers"\n    @change="handleChange"\n    >\n    <Button :icon="CloudUpload">Click to upload</Button>\n  </Upload>\n</template>\n<script>\nimport { CloudUpload } from "kui-icons";\nexport default{\n  data() {\n    return {\n      CloudUpload,\n      headers:{\n        authorization: \'here is token\'\n      }\n    }\n  },\n  methods:{\n    handleChange(info){\n      if (info.file.status !== \'uploading\') {\n        console.log(info.file, info.fileList);\n      }\n      if (info.file.status === \'success\') {\n        this.$Message.success(`${info.file.filename} uploaded successfully`);\n      } else if (info.file.status === \'error\') {\n        this.$Message.error(`${info.file.filename} upload failed.`);\n      }\n    }\n  }\n}\n<\/script>\n')])])])],2)]],2)},p=[],h=n(5118),m={data(){return{CloudUpload:h.CloudUpload,headers:{authorization:"here is token"}}},methods:{handleChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"success"===e.file.status?this.$Message.success(`${e.file.filename} uploaded successfully`):"error"===e.file.status&&this.$Message.error(`${e.file.filename} upload failed.`)}}},f=m,v=(0,s.Z)(f,c,p,!1,null,null,null),g=v.exports,_=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers,multiple:""},on:{change:e.handleChange}},[t("Button",{attrs:{icon:e.CloudUploadOutline}},[e._v("Click to upload")])],1)],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"上传多个文件",tabindex:"-1"}},[e._v("上传多个文件 "),t("a",{staticClass:"anchor",attrs:{href:"#上传多个文件"}},[e._v("#")])]),t("p",[e._v("通过设置 multiple 属性可以支持同时选中多个文件上传。")]),t("blockquote",[t("p",[e._v("不设置为默认, 只能上传一个文件")])])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    :headers="headers"\n    @change="handleChange"\n    multiple\n    >\n    <Button :icon="CloudUploadOutline">Click to upload</Button>\n  </Upload>\n</template>\n<script>\nimport { CloudUploadOutline } from "kui-icons";\nexport default{\n  data() {\n    return {\n      CloudUploadOutline,\n      headers:{\n        authorization: \'here is token\'\n      }\n    }\n  },\n  methods:{\n    handleChange(info){\n      if (info.file.status !== \'uploading\') {\n        console.log(info.file, info.fileList);\n      }\n      if (info.file.status === \'success\') {\n        this.$Message.success(`${info.file.filename} uploaded successfully`);\n      } else if (info.file.status === \'error\') {\n        this.$Message.error(`${info.file.filename} upload failed.`);\n      }\n    }\n  }\n}\n<\/script>\n')])])])],2)]],2)},C=[],b={data(){return{CloudUploadOutline:h.CloudUploadOutline,headers:{authorization:"here is token"}}},methods:{handleChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"success"===e.file.status?this.$Message.success(`${e.file.filename} uploaded successfully`):"error"===e.file.status&&this.$Message.error(`${e.file.filename} upload failed.`)}}},U=b,k=(0,s.Z)(U,_,C,!1,null,null,null),y=k.exports,x=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers,multiple:"",accept:"image/*"},on:{change:e.handleChange}},[t("Button",{attrs:{icon:e.IconImage}},[e._v("Upload Image")])],1),t("br"),t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers,multiple:"",accept:"video/*"},on:{change:e.handleChange}},[t("Button",{attrs:{icon:e.Videocam}},[e._v("Upload Video")])],1),t("br"),t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers,multiple:"",accept:".pdf,.png,.jpeg"},on:{change:e.handleChange}},[t("Button",{attrs:{icon:e.CloudUpload}},[e._v("Upload PDF,PNG,JPEG")])],1)],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"上传文件类型",tabindex:"-1"}},[e._v("上传文件类型 "),t("a",{staticClass:"anchor",attrs:{href:"#上传文件类型"}},[e._v("#")])]),t("p",[e._v("通过 accept 属性（input的原生html` 属性）可以限制上传的文件类型。"),t("br"),e._v(" accept 支持传入以下两种类型字符串："),t("br")]),t("ul",[t("li",[e._v("文件后缀名集合（推荐），如 .jpg、.png 等；")]),t("li",[e._v("文件类型的 MIME types 集合，可参考"),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types"}},[e._v("MDN")]),e._v(" 文档")])]),t("blockquote",[t("p",[e._v("例如只允许用户上传 PNG 和 PDF 文件，accept 可以这样写： accept = '.pdf,.png' 或 accept = 'application/pdf,image/png'（将 PNG 与 PDF 的 MIME type 通过,连接起来即可）。")])])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    :headers="headers"\n    @change="handleChange"\n    multiple\n    accept="image/*"\n    >\n    <Button :icon="IconImage">Upload Image</Button>\n  </Upload>\n  <br/>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    :headers="headers"\n    @change="handleChange"\n    multiple\n    accept="video/*"\n    >\n    <Button :icon="Videocam">Upload Video</Button>\n  </Upload>\n  <br/>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    :headers="headers"\n    @change="handleChange"\n    multiple\n    accept=".pdf,.png,.jpeg"\n    >\n    <Button :icon="CloudUpload">Upload PDF,PNG,JPEG</Button>\n  </Upload>\n</template>\n<script>\nimport { IconImage, Videocam, CloudUpload } from "kui-icons";\nexport default{\n  data() {\n    return {\n      IconImage, Videocam, CloudUpload,\n      headers:{\n        authorization: \'here is token\'\n      }\n    }\n  },\n  methods:{\n    handleChange(info){\n      if (info.file.status !== \'uploading\') {\n        console.log(info.file, info.fileList);\n      }\n      if (info.file.status === \'success\') {\n        this.$Message.success(`${info.file.filename} uploaded successfully`);\n      } else if (info.file.status === \'error\') {\n        this.$Message.error(`${info.file.filename} upload failed.`);\n      }\n    }\n  }\n}\n<\/script>\n')])])])],2)]],2)},O=[],I={data(){return{IconImage:h.IconImage,Videocam:h.Videocam,CloudUpload:h.CloudUpload,headers:{authorization:"here is token"}}},methods:{handleChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"success"===e.file.status?this.$Message.success(`${e.file.filename} uploaded successfully`):"error"===e.file.status&&this.$Message.error(`${e.file.filename} upload failed.`)}}},$=I,B=(0,s.Z)($,x,O,!1,null,null,null),F=B.exports,z=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",type:"picture",headers:e.headers,transformFile:e.transformFile,limit:1,accept:"image/*",uploadIcon:e.CameraOutline,uploadText:"上传头像"},on:{change:e.handleChange}})],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"上传前处理图片",tabindex:"-1"}},[e._v("上传前处理图片 "),t("a",{staticClass:"anchor",attrs:{href:"#上传前处理图片"}},[e._v("#")])]),t("p",[e._v("利用 transformFile 可以在文件上传前处理文件,")])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    type="picture"\n    :headers="headers"\n    @change="handleChange"\n    :transformFile="transformFile"\n    :limit="1"\n    accept="image/*"\n    :uploadIcon="CameraOutline"\n    uploadText="上传头像"\n    >\n  </Upload>\n</template>\n<script>\nimport { CameraOutline } from \'kui-icons\'\nexport default{\n  data() {\n    return {\n      CameraOutline,\n      headers:{\n        authorization: \'here is token\'\n      },\n    }\n  },\n  methods:{\n    transformFile(file){\n      return new Promise((res, rej) => {\n        const canvas = document.createElement(\'canvas\');\n        const ctx = canvas.getContext(\'2d\');\n\n        const img = new Image();\n        img.onload = function () {\n          canvas.width = 200;\n          canvas.height = 300;\n          ctx.drawImage(img, (img.width - canvas.width) / 2, (img.height - canvas.height) / 2, canvas.width, canvas.height);\n          canvas.toBlob((blob) => {\n            const newFile = new File([blob], file.name, { type: file.type });\n            return res(newFile)\n          });\n        };\n        img.src = URL.createObjectURL(file);\n      })\n    },\n    handleChange(info){\n      if (info.file.status !== \'uploading\') {\n        console.log(info.file, info.fileList);\n      }\n    }\n  }\n}\n<\/script>\n')])])])],2)]],2)},w=[],L=(n(2062),{data(){return{CameraOutline:h.CameraOutline,headers:{authorization:"here is token"}}},methods:{transformFile(e){return new Promise(((t,n)=>{const a=document.createElement("canvas"),l=a.getContext("2d"),o=new Image;o.onload=function(){a.width=200,a.height=300,l.drawImage(o,(o.width-a.width)/2,(o.height-a.height)/2,a.width,a.height),a.toBlob((n=>{const a=new File([n],e.name,{type:e.type});return t(a)}))},o.src=URL.createObjectURL(e)}))},handleChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList)}}}),M=L,T=(0,s.Z)(M,z,w,!1,null,null,null),S=T.exports,j=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers,limit:e.limit,minSize:200,maxSize:1024,multiple:""},on:{exceed:()=>{this.$Message.warning(`最多只能上传${e.limit}个文件`)},"size-error":({file:e})=>{this.$Message.warning(`${e.filename}大小超过限制`)},change:e.handleChange,remove:e.handleChange}},[t("Button",{attrs:{icon:e.CloudUploadOutline,disabled:e.disabled}},[e._v("点击上传 (最小200KB, 最大1MB,最多上传 "+e._s(e.limit)+" 项)")])],1)],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"上传限制",tabindex:"-1"}},[e._v("上传限制 "),t("a",{staticClass:"anchor",attrs:{href:"#上传限制"}},[e._v("#")])]),t("p",[e._v("limit 限制上传数量, minSize 和 maxSize 属性可以自定义上传文件大小的限制。")])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    :headers="headers"\n    :limit="limit"\n    :minSize="200"\n    :maxSize="1024"\n    @exceed="()=>{ this.$Message.warning(`最多只能上传${limit}个文件`) }"\n    @size-error="({file})=>{ this.$Message.warning(`${file.filename}大小超过限制`) }"\n    @change="handleChange"\n    @remove="handleChange"\n    multiple\n    >\n    <Button :icon="CloudUploadOutline" :disabled="disabled">点击上传 (最小200KB, 最大1MB,最多上传 {{limit}} 项)</Button>\n  </Upload>\n</template>\n<script>\nimport { CloudUploadOutline } from "kui-icons";\nexport default{\n  data() {\n    return {\n      CloudUploadOutline,\n      headers:{\n        authorization: \'here is token\'\n      },\n      disabled:false,\n      limit:2,\n    }\n  },\n  methods:{\n    handleChange(info){\n      this.disabled = info.fileList.length >= this.limit\n    }\n  }\n}\n<\/script>\n')])])])],2)]],2)},P=[],Z={data(){return{CloudUploadOutline:h.CloudUploadOutline,headers:{authorization:"here is token"},disabled:!1,limit:2}},methods:{handleChange(e){this.disabled=e.fileList.length>=this.limit}}},E=Z,q=(0,s.Z)(E,j,P,!1,null,null,null),V=q.exports,A=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Upload",{ref:"upload",attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers,data:e.pramas,autoTrigger:!1,multiple:""},on:{"before-upload":e.beforeUpload,remove:e.beforeUpload}},[t("Button",{attrs:{icon:e.CloudUploadOutline}},[e._v("点击选择上传文件")])],1),t("br"),t("Button",{attrs:{disabled:e.disabled},on:{click:function(t){return e.$refs.upload.upload()}}},[e._v("开始上传")])],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"手动上传/自定义属性",tabindex:"-1"}},[e._v("手动上传/自定义属性 "),t("a",{staticClass:"anchor",attrs:{href:"#手动上传/自定义属性"}},[e._v("#")])]),t("ul",[t("li",[e._v("通过设置 data、headers 可添加自定义上传属性")]),t("li",[e._v("autoTrigger='false'，选中文件后将不会自动触发上传。需要手动调用 ref 上的 upload 方法触发")]),t("li",[e._v("name 为上传文件名")])])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    :headers="headers"\n    :data="pramas"\n    :autoTrigger="false"\n    @before-upload="beforeUpload"\n    @remove="beforeUpload"\n    multiple\n    ref="upload"\n    >\n    <Button :icon="CloudUploadOutline" >点击选择上传文件</Button>\n  </Upload>\n  <br/>\n  <Button :disabled="disabled" @click="$refs.upload.upload()">开始上传</Button>\n</template>\n<script>\nimport { CloudUploadOutline } from "kui-icons";\nexport default{\n  data() {\n    return {\n      CloudUploadOutline,\n      pramas:{\n        type:\'image\',\n        time: Date.now()\n      },\n      headers:{\n        authorization: \'here is token\'\n      },\n      disabled:true,\n    }\n  },\n  methods:{\n    beforeUpload(info){\n      this.disabled = info.fileList.length == 0\n    },\n  }\n}\n<\/script>\n')])])])],2)]],2)},D=[],G={data(){return{CloudUploadOutline:h.CloudUploadOutline,pramas:{type:"image",time:Date.now()},headers:{authorization:"here is token"},disabled:!0}},methods:{beforeUpload(e){this.disabled=0==e.fileList.length}}},N=G,K=(0,s.Z)(N,A,D,!1,null,null,null),R=K.exports,H=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",directory:"",headers:e.headers},on:{change:e.handleChange}},[t("Button",{attrs:{icon:e.CloudUploadOutline}},[e._v("Click to upload")])],1)],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"上传文件夹",tabindex:"-1"}},[e._v("上传文件夹 "),t("a",{staticClass:"anchor",attrs:{href:"#上传文件夹"}},[e._v("#")])]),t("p",[e._v("通过传入 directory 为 true，可以支持上传文件夹下的所有文件")])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    directory\n    :headers="headers"\n    @change="handleChange"\n    >\n    <Button :icon="CloudUploadOutline">Click to upload</Button>\n  </Upload>\n</template>\n<script>\nimport { CloudUploadOutline } from "kui-icons";\nexport default{\n  data() {\n    return {\n      CloudUploadOutline,\n      headers:{\n        authorization: \'here is token\'\n      }\n    }\n  },\n  methods:{\n    handleChange(info){\n      if (info.file.status !== \'uploading\') {\n        console.log(info.file, info.fileList);\n      }\n    }\n  }\n}\n<\/script>\n')])])])],2)]],2)},J=[],W={data(){return{CloudUploadOutline:h.CloudUploadOutline,headers:{authorization:"here is token"}}},methods:{handleChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList)}}},Q=W,X=(0,s.Z)(Q,H,J,!1,null,null,null),Y=X.exports,ee=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",type:"picture",headers:e.headers,fileList:e.fileList,accept:"image/*",uploadText:"上传图片"},on:{change:e.handleChange}})],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"照片墙",tabindex:"-1"}},[e._v("照片墙 "),t("a",{staticClass:"anchor",attrs:{href:"#照片墙"}},[e._v("#")])]),t("p",[e._v("设置 type = 'picture'，用户可以上传图片并在列表中显示缩略图")])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v("<template>\n  <Upload \n    action=\"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2\" \n    name=\"file\"\n    type=\"picture\"\n    :headers=\"headers\"\n    @change=\"handleChange\"\n    :fileList=\"fileList\"\n    accept=\"image/*\"\n    uploadText=\"上传图片\"\n    >\n  </Upload>\n</template>\n<script>\nexport default{\n  data() {\n    return {\n      headers:{\n        authorization: 'here is token'\n      },\n      fileList:[\n        {\n          url:'https://cdn.chuchur.com/upload/demo/test_300.jpg',\n          status:'uploading',\n          filename:'test.jpg',\n          size:'222kb',\n          percent:50,\n          status:'uploading'\n        },\n        {\n          url:'https://cdn.chuchur.com/upload/demo/test_300.jpg',\n          status:'error',\n          filename:'test.jpg',\n          size:'222kb'\n        },\n      ]\n    }\n  },\n  methods:{\n    handleChange(info){\n      if (info.file.status !== 'uploading') {\n        console.log(info.file, info.fileList);\n      }\n    }\n  }\n}\n<\/script>\n")])])])],2)]],2)},te=[],ne={data(){return{headers:{authorization:"here is token"},fileList:[{url:"https://cdn.chuchur.com/upload/demo/test_300.jpg",status:"uploading",filename:"test.jpg",size:"222kb",percent:50,status:"uploading"},{url:"https://cdn.chuchur.com/upload/demo/test_300.jpg",status:"error",filename:"test.jpg",size:"222kb"}]}},methods:{handleChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList)}}},ae=ne,le=(0,s.Z)(ae,ee,te,!1,null,null,null),oe=le.exports,ie=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",type:"picture",headers:e.headers,limit:1,accept:"image/*",uploadIcon:e.CameraOutline,uploadText:"上传头像"},on:{change:e.handleChange}})],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"上传头像",tabindex:"-1"}},[e._v("上传头像 "),t("a",{staticClass:"anchor",attrs:{href:"#上传头像"}},[e._v("#")])]),t("p",[e._v("limit等于上传文件数量时, 则不显示选择文件组件,")])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <Upload \n    action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n    name="file"\n    type="picture"\n    :headers="headers"\n    @change="handleChange"\n    :limit="1"\n    accept="image/*"\n    :uploadIcon="CameraOutline"\n    uploadText="上传头像"\n    >\n  </Upload>\n</template>\n<script>\nimport { CameraOutline } from \'kui-icons\'\nexport default{\n  data() {\n    return {\n      CameraOutline,\n      headers:{\n        authorization: \'here is token\'\n      },\n    }\n  },\n  methods:{\n    handleChange(info){\n      if (info.file.status !== \'uploading\') {\n        console.log(info.file, info.fileList);\n      }\n    }\n  }\n}\n<\/script>\n')])])])],2)]],2)},se=[],de={data(){return{CameraOutline:h.CameraOutline,headers:{authorization:"here is token"}}},methods:{handleChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList)}}},re=de,ue=(0,s.Z)(re,ie,se,!1,null,null,null),ce=ue.exports,pe=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("div",{staticStyle:{width:"556px"}},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers,draggable:"",uploadIcon:e.CloudUploadOutline,uploadText:"点击上传文件或拖拽文件到这里",uploadSubText:"支持任意类型文件"},on:{change:e.handleChange}})],1)]),t("template",{slot:"description"},[t("h4",{attrs:{id:"拖拽上传",tabindex:"-1"}},[e._v("拖拽上传 "),t("a",{staticClass:"anchor",attrs:{href:"#拖拽上传"}},[e._v("#")])]),t("p",[e._v("draggable='true'，可以使用拖拽功能")])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <div style="width:556px">\n    <Upload \n      action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n      name="file"\n      :headers="headers"\n      draggable\n      :uploadIcon="CloudUploadOutline"\n      uploadText="点击上传文件或拖拽文件到这里"\n      uploadSubText="支持任意类型文件"\n      @change="handleChange"\n      >\n    </Upload>\n  </div>\n</template>\n<script>\nimport { CloudUploadOutline } from "kui-icons";\nexport default{\n  data() {\n    return {\n      CloudUploadOutline,\n      headers:{\n        authorization: \'here is token\'\n      }\n    }\n  },\n  methods:{\n    handleChange(info){\n      if (info.file.status !== \'uploading\') {\n        console.log(info.file, info.fileList);\n      }\n      if (info.file.status === \'success\') {\n        this.$Message.success(`${info.file.filename} uploaded successfully`);\n      } else if (info.file.status === \'error\') {\n        this.$Message.error(`${info.file.filename} upload failed.`);\n      }\n    }\n  }\n}\n<\/script>\n')])])])],2)]],2)},he=[],me={data(){return{CloudUploadOutline:h.CloudUploadOutline,headers:{authorization:"here is token"}}},methods:{handleChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"success"===e.file.status?this.$Message.success(`${e.file.filename} uploaded successfully`):"error"===e.file.status&&this.$Message.error(`${e.file.filename} upload failed.`)}}},fe=me,ve=(0,s.Z)(fe,pe,he,!1,null,null,null),ge=ve.exports,_e=function(){var e=this,t=e._self._c;return t("div",[[t("demo",[t("template",{slot:"component"},[t("Form",{ref:"form",attrs:{model:e.form,rules:e.rules,wrapperCol:e.wrapperCol,labelCol:e.labelCol},on:{submit:e.submit}},[t("FormItem",{attrs:{label:"图像",prop:"avatar"}},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",type:"picture",headers:e.headers,limit:1,accept:"image/*",uploadIcon:e.CameraOutline,uploadText:"上传头像"},on:{change:e.uploadAvatar,remove:()=>e.form.avatar=""}}),t("Input",{attrs:{type:"hidden"}})],1),t("FormItem",{attrs:{label:"单个文件",prop:"file"}},[t("Input",{attrs:{readonly:"",placeholder:"请上传文件"}},[t("Upload",{attrs:{slot:"suffix",action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers,showUploadList:!1,limit:1,accept:"image/*"},on:{change:e.uploadFile,remove:()=>e.form.file=""},slot:"suffix"},[t("Icon",{attrs:{type:e.CloudUploadOutline,size:"20"}})],1)],1)],1),t("FormItem",{attrs:{label:"多个文件",prop:"files"}},[t("Upload",{attrs:{action:"https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2",name:"file",headers:e.headers,accept:"image/*"},on:{change:e.uploadFiles,remove:e.remove}},[t("Button",{attrs:{theme:"light"}},[e._v("上传文件")])],1),t("Input",{attrs:{type:"hidden"}})],1),t("FormItem",{attrs:{wrapperCol:{offset:6}}},[t("Button",{attrs:{type:"primary",htmlType:"submit"}},[e._v("提交表单")])],1),t("Form")],1)],1),t("template",{slot:"description"},[t("h4",{attrs:{id:"表单校验",tabindex:"-1"}},[e._v("表单校验 "),t("a",{staticClass:"anchor",attrs:{href:"#表单校验"}},[e._v("#")])]),t("p",[e._v("上传表单校验")])]),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[e._v('<template>\n  <Form :model="form" :rules="rules" @submit="submit" :wrapperCol="wrapperCol" :labelCol="labelCol" ref="form">\n    <FormItem label="图像" prop="avatar">\n      <Upload \n        action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n        name="file"\n        type="picture"\n        :headers="headers"\n        @change="uploadAvatar"\n        @remove="()=>form.avatar=\'\'"\n        :limit="1"\n        accept="image/*"\n        :uploadIcon="CameraOutline"\n        uploadText="上传头像"\n        >\n      </Upload>\n      <Input type="hidden"/>\n    </FormItem>\n    <FormItem label="单个文件" prop="file">\n      <Input readonly placeholder="请上传文件">\n        <Upload \n          action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n          name="file"\n          :headers="headers"\n          @change="uploadFile"\n          @remove="()=>form.file=\'\'"\n          :showUploadList="false"\n          :limit="1"\n          accept="image/*"\n          slot="suffix"\n          ><Icon :type="CloudUploadOutline" size="20" /></Upload>\n      </Input>\n    </FormItem>\n    <FormItem label="多个文件" prop="files">\n        <Upload \n          action="https://run.mocky.io/v3/79c1cb9d-040a-43d9-919d-91ded176a9c2" \n          name="file"\n          :headers="headers"\n          @change="uploadFiles"\n          @remove="remove"\n          accept="image/*"\n          ><Button theme="light">上传文件</Button>\n        </Upload>\n        <Input type="hidden"/>\n    </FormItem>\n    <FormItem :wrapperCol="{offset:6}">\n      <Button type="primary" htmlType="submit">提交表单</Button>\n    </FormItem>\n  <Form>\n</template>\n<script>\nimport { CloudUploadOutline,CameraOutline } from "kui-icons";\nexport default{\n  data() {\n    return {\n      CloudUploadOutline,CameraOutline,\n      labelCol: { span: 6 },\n      wrapperCol: { span: 16 },\n      headers:{\n        authorization: \'here is token\'\n      },\n      form:{\n        avatar:\'\',\n        file:\'\',\n        files:[],\n      },\n      rules: {\n        avatar: [\n          { required: true, message: \'请上传图像\' },\n        ],\n        file: [\n          { required: true, message: \'请上传文件\' },\n        ],\n        files: [\n          { required: true, message: \'请上传文件\' },\n        ],\n      },\n    }\n  },\n  methods:{\n    uploadFile({file}){\n      if (file.status == \'success\') {\n        this.form.file = file.response.url\n        this.$refs.form.test(\'file\')\n      }\n    },\n    uploadFiles({file}){\n      if (file.status == \'success\') {\n        this.form.files.push(file.response.url)\n        this.$refs.form.test(\'files\')\n      }\n    },\n    remove({file}){\n      // 删除文件的时候 要对应的从表单中删除相对应的url\n      if(file.status == \'success\'){\n        let url = file.response.url\n        let index = this.form.files.indexOf(url)\n        this.form.files.slice(index,1)\n        this.$refs.form.test(\'files\')\n      }\n    },\n    uploadAvatar({file}){\n      if (file.status == \'success\') {\n        this.form.avatar = file.response.url\n        this.$refs.form.test(\'avatar\')\n      }\n    },\n    submit({valid, model}) {\n      this.$Message[valid ? \'success\' : \'error\'](valid ? \'success\' : \'faild\')\n      console.log(model)\n    }\n  }\n}\n<\/script>\n')])])])],2)]],2)},Ce=[],be=(n(7658),{data(){return{CloudUploadOutline:h.CloudUploadOutline,CameraOutline:h.CameraOutline,labelCol:{span:6},wrapperCol:{span:16},headers:{authorization:"here is token"},form:{avatar:"",file:"",files:[]},rules:{avatar:[{required:!0,message:"请上传图像"}],file:[{required:!0,message:"请上传文件"}],files:[{required:!0,message:"请上传文件"}]}}},methods:{uploadFile({file:e}){"success"==e.status&&(this.form.file=e.response.url,this.$refs.form.test("file"))},uploadFiles({file:e}){"success"==e.status&&(this.form.files.push(e.response.url),this.$refs.form.test("files"))},remove({file:e}){if("success"==e.status){let t=e.response.url,n=this.form.files.indexOf(t);this.form.files.slice(n,1),this.$refs.form.test("files")}},uploadAvatar({file:e}){"success"==e.status&&(this.form.avatar=e.response.url,this.$refs.form.test("avatar"))},submit({valid:e,model:t}){this.$Message[e?"success":"error"](e?"success":"faild"),console.log(t)}}}),Ue=be,ke=(0,s.Z)(Ue,_e,Ce,!1,null,null,null),ye=ke.exports,xe=function(){var e=this;e._self._c;return e._m(0)},Oe=[function(){var e=this,t=e._self._c;return t("div",[t("h2",{attrs:{id:"upload-api",tabindex:"-1"}},[e._v("Upload API "),t("a",{staticClass:"anchor",attrs:{href:"#upload-api"}},[e._v("#")])]),t("table",[t("thead",[t("tr",[t("th",[e._v("属性")]),t("th",[e._v("说明")]),t("th",[e._v("类型")]),t("th",[e._v("默认值")])])]),t("tbody",[t("tr",[t("td",[e._v("accept")]),t("td",[e._v("接受上传的文件类型, 详见 "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept"}},[e._v("input accept Attribute")])]),t("td",[e._v("String")]),t("td",[e._v("-")])]),t("tr",[t("td",[e._v("action")]),t("td",[e._v("上传的地址")]),t("td",[e._v("String")]),t("td",[e._v("-")])]),t("tr",[t("td",[e._v("method")]),t("td",[e._v("上传请求的 http method")]),t("td",[e._v("String")]),t("td",[e._v("post")])]),t("tr",[t("td",[e._v("data")]),t("td",[e._v("上传所需参数")]),t("td",[e._v("Object")]),t("td",[e._v("-")])]),t("tr",[t("td",[e._v("disabled")]),t("td",[e._v("是否禁用")]),t("td",[e._v("Boolean")]),t("td",[e._v("false")])]),t("tr",[t("td",[e._v("headers")]),t("td",[e._v("设置上传的请求头部")]),t("td",[e._v("Object")]),t("td",[e._v("-")])]),t("tr",[t("td",[e._v("multiple")]),t("td",[e._v("是否支持多选文件")]),t("td",[e._v("Boolean")]),t("td",[e._v("false")])]),t("tr",[t("td",[e._v("directory")]),t("td",[e._v("是否支持上传目录")]),t("td",[e._v("Boolean")]),t("td",[e._v("false")])]),t("tr",[t("td",[e._v("showUploadList")]),t("td",[e._v("是否显示上传列表")]),t("td",[e._v("Boolean")]),t("td",[e._v("true")])]),t("tr",[t("td",[e._v("autoTrigger")]),t("td",[e._v("是否自动上传")]),t("td",[e._v("Boolean")]),t("td",[e._v("true")])]),t("tr",[t("td",[e._v("draggable")]),t("td",[e._v("是否支持拖拽上传")]),t("td",[e._v("Boolean")]),t("td",[e._v("false")])]),t("tr",[t("td",[e._v("fileList")]),t("td",[e._v("上传的文件列表")]),t("td",[e._v("Array")]),t("td",[e._v("false")])]),t("tr",[t("td",[e._v("name")]),t("td",[e._v("发到后台的文件参数名")]),t("td",[e._v("String")]),t("td",[e._v("'file'")])]),t("tr",[t("td",[e._v("uploadIcon")]),t("td",[e._v("上传域的辅助图标")]),t("td",[e._v("String")]),t("td",[e._v("'file'")])]),t("tr",[t("td",[e._v("uploadText")]),t("td",[e._v("上传域的辅助文字")]),t("td",[e._v("String")]),t("td",[e._v("'file'")])]),t("tr",[t("td",[e._v("uploadSubText")]),t("td",[e._v("上传域的二级辅助文字")]),t("td",[e._v("String")]),t("td",[e._v("'file'")])]),t("tr",[t("td",[e._v("limit")]),t("td",[e._v("最多允许上传文件个数")]),t("td",[e._v("Number")]),t("td",[e._v("-")])]),t("tr",[t("td",[e._v("minSize")]),t("td",[e._v("上传文件最小单位(KB)")]),t("td",[e._v("String")]),t("td",[e._v("-")])]),t("tr",[t("td",[e._v("maxSize")]),t("td",[e._v("上传文件最大单位(KB)")]),t("td",[e._v("String")]),t("td",[e._v("-")])]),t("tr",[t("td",[e._v("transformFile")]),t("td",[e._v("在上传之前转换文件。支持返回一个 Promise 对象")]),t("td",[e._v("Function(file)")]),t("td",[e._v("-")])]),t("tr",[t("td",[e._v("change")]),t("td",[e._v("上传中、完成、失败都会调用这个函数")]),t("td",[e._v("Function")]),t("td",[e._v("-")])]),t("tr",[t("td",[e._v("remove")]),t("td",[e._v("移除文件回调")]),t("td",[e._v("Function")]),t("td",[e._v("-")])])])])])}],Ie={},$e=(0,s.Z)(Ie,xe,Oe,!1,null,null,null),Be=$e.exports,Fe={render(){const e=arguments[0];return e("div",{class:"demo-upload"},[e(u),e(g),e(y),e(Y),e(F),e(S),e(V),e(R),e(oe),e(ce),e(ge),e(ye),e(Be)])}},ze=Fe,we=(0,s.Z)(ze,a,l,!1,null,null,null),Le=we.exports}}]);